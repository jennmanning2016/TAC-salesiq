<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TAC SalesIQ</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    header { background: #4B286D; color: white; padding: 1rem; text-align: center; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; background: #e5e5e5; padding: 0.5rem; }
    nav button { margin: 0.25rem; padding: 0.5rem 1rem; border: none; background: #ccc; cursor: pointer; border-radius: 4px; }
    nav button.active { background: #4B286D; color: white; }
    .container { padding: 1rem; }
    .prompt { border-bottom: 1px solid #ddd; padding: 0.5rem 0; }
    .title { font-weight: bold; }
    .prompt p { margin: 0.25rem 0; }
    .copy-button { margin-top: 0.25rem; background: #4B286D; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <h1>TAC SalesIQ Prompts</h1>
  </header>
  <nav id="tabs"></nav>
  <div class="container" id="prompt-container"></div>
  <script>
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vS_bHJrzHuXbEjoPS63IHXY5AlHMbykJxHqw05ejMZces3Ixhl-PmaW6mh9zwL1YaaKw7rdRe7ncZE9/pub?output=csv";

    fetch(sheetURL)
      .then(res => res.text())
      .then(text => {
        const rows = text.split('\n').map(row => row.split(','));
        const headers = rows.shift();
        const data = rows.map(row => Object.fromEntries(row.map((val, i) => [headers[i], val])));
        const tabs = [...new Set(data.map(d => d.businessUnit).filter(Boolean))];

        const tabContainer = document.getElementById('tabs');
        const promptContainer = document.getElementById('prompt-container');

        tabs.forEach((tab, index) => {
          const btn = document.createElement('button');
          btn.textContent = tab;
          if (index === 0) btn.classList.add('active');
          btn.onclick = () => {
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderPrompts(tab);
          };
          tabContainer.appendChild(btn);
        });

        function renderPrompts(tab) {
          promptContainer.innerHTML = '';
          data.filter(d => d.businessUnit === tab).forEach(d => {
            const div = document.createElement('div');
            div.className = 'prompt';
            div.innerHTML = `<div class="title">${d.title}</div><p>${d.prompt}</p><button class="copy-button">Copy Prompt</button>`;
            const btn = div.querySelector('button');
            btn.onclick = () => {
              navigator.clipboard.writeText(d.prompt).then(() => {
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy Prompt', 1500);
              });
            };
            promptContainer.appendChild(div);
          });
        }

        if (tabs.length > 0) renderPrompts(tabs[0]);
      });
  </script>
</body>
</html>
